```{=html}

<ul class="people-grid list">
<%
/* ------------ helpers ------------ */
function getImg(item){
  return item.headshot ?? item.photo ?? item.image ?? item.thumbnail ?? "";
}
function dirOf(p){ return (p || "").replace(/\/[^\/]*$/, ""); }
function encodePath(p){ return p.split("/").map(encodeURIComponent).join("/"); }
function resolveImgUrl(item, raw){
  if (!raw) return "";
  if (/^https?:\/\//i.test(raw)) return raw;
  const clean = raw.startsWith("/") ? raw.slice(1) : raw;
  const base  = dirOf(item.path || "");
  return encodePath((base ? base + "/" : "") + clean);
}
function icon(name){ return `bi bi-${name}`; }
function normalizeOrcid(v){
  if (!v) return "";
  const s = String(v).trim();
  if (/^https?:\/\//i.test(s)) return s;
  return `https://orcid.org/${s}`;
}
%>

<% for (const item of items) {
     const img = resolveImgUrl(item, getImg(item));
     const orcidUrl = normalizeOrcid(item.orcid);
     const website  = item.link;
%>
  <li class="people-card" <%= metadataAttrs(item) %>>
    <div class="people-figure">
      <% if (img) { %>
        <img src="<%- img %>" alt="<%= (item.title ?? 'Person') + (item.role ? ', ' + item.role : '') %>" loading="lazy">
      <% } else { %>
        <div class="no-photo" aria-hidden="true"><span><%= (item.title ?? '?').slice(0,1) %></span></div>
      <% } %>

      <!-- Icon-only buttons that expand labels on hover/focus -->
      <div class="actions actions-bare">
        <% if (item.path) { %>
          <a class="btn-liquid chip blue" href="<%- item.path %>" aria-label="More details for <%= item.title ?? '' %>">
            <i class="<%= icon('info-circle-fill') %>" aria-hidden="true"></i><span class="label">Details</span>
          </a>
        <% } %>
        <% if (orcidUrl) { %>
          <a class="btn-liquid chip green" href="<%- orcidUrl %>" target="_blank" rel="noopener" aria-label="ORCID">
            <i class="<%= icon('person-badge-fill') %>" aria-hidden="true"></i><span class="label">ORCID</span>
          </a>
        <% } %>
        <% if (website) { %>
          <a class="btn-liquid chip purple" href="<%- website %>" target="_blank" rel="noopener" aria-label="Website">
            <i class="<%= icon('box-arrow-up-right') %>" aria-hidden="true"></i><span class="label">Website</span>
          </a>
        <% } %>
      </div>
    </div>

    <div class="people-meta">
      <h5 class="name"><%= item.title ?? '(Untitled)' %></h5>
      <% if (item.role) { %><div class="role"><%= item.role %></div><% } %>
    </div>
  </li>
<% } %>
</ul>

<style>
.people-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 1rem;
  list-style: none;
  margin: 0;
  padding: 0;
}

.people-card {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.people-figure {
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  background: #f4f6fb;
}

.people-figure img {
  width: 100%;
  height: 280px;
  object-fit: cover;
  display: block;
  border-radius: 16px;
}

.no-photo {
  width: 100%;
  height: 280px;
  display: grid;
  place-items: center;
  background: linear-gradient(180deg, #eaeef7, #dfe6f5);
}
.no-photo span {
  font-size: 2.25rem;
  font-weight: 700;
  color: #5b6b8a;
}

/* ---- ACTIONS ---- */
.actions {
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: 10px;
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: flex-start;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 0.18s ease, transform 0.18s ease;
}

/* only visible when card hovered or focused */
.people-card:hover .actions,
.people-card:focus-within .actions {
  opacity: 1;
  transform: translateY(0);
}

/* ---- BUTTONS ---- */
.btn-liquid {
  --lg-hue: 215;
  --lg-sat: 90%;
  --lg-light: 56%;
  --lg-bg: rgba(255, 255, 255, 0.25);
  --lg-border: rgba(255, 255, 255, 0.55);
  --lg-shadow: rgba(30, 30, 60, 0.25);
  --lg-tint: hsla(var(--lg-hue), var(--lg-sat), var(--lg-light), 0.15);

  position: relative;
  display: grid;
  place-items: center;             /* centers icon perfectly */
  border-radius: 50%;
  border: 1px solid var(--lg-border);
  color: #0b1220;
  text-decoration: none;
  font-weight: 600;
  line-height: 1;
  background: linear-gradient(180deg, var(--lg-tint), transparent 60%), var(--lg-bg);
  box-shadow: 0 4px 10px var(--lg-shadow), inset 0 0 0 0.5px rgba(255, 255, 255, 0.35);
  transition: all 0.25s ease;
  height: 42px;
  width: 42px;
  overflow: hidden;
}

.btn-liquid .bi {
  font-size: 1.15em;
  margin: 0;
}

/* label hidden by default */
.btn-liquid .label {
  opacity: 0;
  max-width: 0;
  overflow: hidden;
  white-space: nowrap;
  transition: opacity 0.25s ease, max-width 0.25s ease, margin 0.25s ease;
}

/* hover/focus: switch to flex, expand into pill */
.btn-liquid:hover,
.btn-liquid:focus {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 0.8rem;
  height: 42px;
  width: auto;
  border-radius: 999px;
}

.btn-liquid:hover .label,
.btn-liquid:focus .label {
  opacity: 1;
  max-width: 10rem;
  margin-left: 0.4rem;
}

/* color variants */
.btn-liquid.blue { --lg-hue: 215; }
.btn-liquid.green { --lg-hue: 158; }
.btn-liquid.purple { --lg-hue: 265; }

/* meta */
.people-meta .name { margin: 0.25rem 0 0 0; }
.people-meta .role { color: var(--quarto-text-muted, #6b7280); font-size: 0.95rem; }

/* dark theme */
:root[data-theme="dark"] .btn-liquid {
  color: rgba(255, 255, 255, 0.92);
  --lg-bg: rgba(255, 255, 255, 0.12);
  --lg-border: rgba(255, 255, 255, 0.35);
  --lg-shadow: rgba(0, 0, 0, 0.45);
}

/* mobile: always show buttons */
@media (max-width: 640px) {
  .people-card .actions {
    opacity: 1;
    transform: none;
  }
}

/* Size var so it's easy to tweak */
:root { --person-btn: 42px; }

/* Circular state: perfect centering */
.btn-liquid {
  width: var(--person-btn);
  height: var(--person-btn);
  padding: 0;                  /* no padding in circle state */
  border-radius: 50%;
  display: grid;
  place-items: center;         /* centers icon precisely */
  overflow: hidden;
}

/* Bootstrap Icons default baseline fix */
.btn-liquid .bi {
  display: block;              /* remove inline baseline behavior */
  line-height: 1;
  vertical-align: middle;      /* override BI default (-.125em) */
  margin: 0;                   /* no stray spacing */
  transform: translateY(0);    /* ensure no residual shift */
}

/* Expand-on-hover state */
.btn-liquid:hover,
.btn-liquid:focus {
  display: inline-flex;        /* switch to flex only when expanding */
  align-items: center;
  justify-content: center;
  height: var(--person-btn);
  width: auto;                 /* allow pill growth */
  padding: 0 0.8rem;           /* add horizontal room for label */
  border-radius: 999px;
}

/* Label reveal stays the same */
.btn-liquid .label {
  opacity: 0;
  max-width: 0;
  overflow: hidden;
  white-space: nowrap;
  transition: opacity .25s ease, max-width .25s ease, margin .25s ease;
}
.btn-liquid:hover .label,
.btn-liquid:focus .label {
  opacity: 1;
  max-width: 10rem;
  margin-left: .4rem;
}

/* (Optional) 1px visual nudge if your font renders low on macOS */
.btn-liquid .bi.nudge-up { transform: translateY(-1px); }

</style>


```